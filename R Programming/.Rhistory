findAssocs(dtm, "black", 0.5)
#find sparse terms
inspect(removeSparseTerms(dtm, 0.9))
sparse.dtm <- removeSparseTerms(dtm, sparse = 0.98)
sparse.dtm
dtm <-DocumentTermMatrix(corpus)
head(corpus_df)
dtm <-DocumentTermMatrix(corpus)
sent <- calculate_score(corpus_df$text)
sent1 <- calculate_sentiment(corpus_df$text)
head(sent1, 50)
getSentimentScore = function(sentences, positive.words, negative.words)
{
require(plyr)
require(stringr)
scores = laply(sentences, function(sentence, positive.words, negative.words) {
# Let first remove the Digit, Punctuation character and Control characters:
#sentence = gsub('[[:cntrl:]]', '', gsub('[[:punct:]]', '', gsub('\\d+', '', sentence)))
# Then lets convert all to lower sentence case:
#sentence = tolower(sentence)
# Now lets split each sentence by the space delimiter
words = unlist(str_split(sentence, '\\s+'))
# Get the boolean match of each words with the positive & negative opinion-lexicon
pos.matches = !is.na(match(words, positive.words))
neg.matches = !is.na(match(words, negative.words))
# Now get the score as total positive sentiment minus the total negatives
score = sum(pos.matches) - sum(neg.matches)
return(score)
}, positive.words, negative.words)
# Return a data frame with respective sentence and the score
return(data.frame(text=sentences, score=scores))
}
negative.words <- c(negative.words, "rushforcash","moditakesbrib","cashcrunch", "modisurgicalstrikeoncommonman")
positive.words<- c(positive.words, "iamwithmodi", "corruptioncleanup")
result = getSentimentScore(corpus_df$text, positive.words , negative.words)
head(result)
corpus_df
head(corpus_df)
head(corpus_df)
meta(corpus[[1]])
dtm <-DocumentTermMatrix(corpus)
require(tm) # to perfrom word preprocessing and corpus
require(qdap) # converting corpus to data frame
require(SnowballC)
require(RSentiment)
require(cluster)
require(fpc)
require(syuzhet)
require(plyr)
require(stringr)
rm(list=ls())
data <- read.csv("C:/Users/prabanch/Desktop/PGBA/CAPSTONE/15-16/Book1.csv",stringsAsFactors = F)
cor1 <- Corpus(DataframeSource(data))
head(data)
cor1$content
for(j in seq(cor1)) {
cor1[[j]]<-tolower(cor1[[j]])
cor1[[j]]<-gsub("@\\w+","", cor1[[j]])
cor1[[j]]<-gsub("[[:punct:]]","",cor1[[j]])
cor1[[j]]<-gsub("[[:digit:]]","",cor1[[j]])
cor1[[j]]<-gsub("http\\w+","",cor1[[j]])
cor1[[j]]<-gsub("rt","",cor1[[j]])
cor1[[j]]<-gsub("uu+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("hh+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("ha+\\w+","",cor1[[j]])
#cor1[[j]]<-gsub(".","",cor1[[j]])
}
cor_data1<- as.data.frame(cor1)
head(cor_data1)
corpus<- Corpus(DataframeSource(cor_data1))
corpus<-tm_map(corpus,removePunctuation)
corpus<-tm_map(corpus,removeNumbers)
corpus<-tm_map(corpus,removeWords,stopwords("english"))
corpus<-tm_map(corpus,removeWords,c("phirjumla","kno","dec","hhmmm","a","aur","all","and","also","bahutkrantikari","babaji","ayega"))
corpus<-tm_map(corpus,stripWhitespace)
corpus<-tm_map(corpus,stemDocument)
corpus<-tm_map(corpus,tolower)
corpus_df <-as.data.frame(corpus)
head(corpus_df)
head(data)
head(corpus_df)
meta(corpus[[1]])
dtm <-DocumentTermMatrix(corpus)
dtm <-DocumentTermMatrix(corpus_df)
require(tm)
require(qdap)
require(SnowballC)
require(RSentiment)
require(cluster)
require(fpc)
rm(list=ls())
data <- read.csv("C:\\Users\\prabanch\\PycharmProjects\\Sentiment Analysis\\2016-11-08  #BlackMoney.csv",stringsAsFactors = F)
cor1 <- Corpus(DataframeSource(data))
for(j in seq(cor1)) {
cor1[[j]]<-tolower(cor1[[j]])
cor1[[j]]<-gsub("@\\w+","", cor1[[j]])
cor1[[j]]<-gsub("[[:punct:]]","",cor1[[j]])
cor1[[j]]<-gsub("[[:digit:]]","",cor1[[j]])
cor1[[j]]<-gsub("http\\w+","",cor1[[j]])
cor1[[j]]<-gsub("rt","",cor1[[j]])
cor1[[j]]<-gsub("uu+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("hh+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("ha+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("…","",cor1[[j]])
}
cor_data1<- as.data.frame(cor1)
cor1 <- Corpus(DataframeSource(data))
for(j in seq(cor1)) {
cor1[[j]]<-tolower(cor1[[j]])
cor1[[j]]<-gsub("@\\w+","", cor1[[j]])
cor1[[j]]<-gsub("[[:punct:]]","",cor1[[j]])
cor1[[j]]<-gsub("[[:digit:]]","",cor1[[j]])
cor1[[j]]<-gsub("http\\w+","",cor1[[j]])
cor1[[j]]<-gsub("rt","",cor1[[j]])
cor1[[j]]<-gsub("uu+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("hh+\\w+","",cor1[[j]])
cor1[[j]]<-gsub("ha+\\w+","",cor1[[j]])
#cor1[[j]]<-gsub("…","",cor1[[j]])
}
cor_data1<- as.data.frame(cor1)
corpus<- Corpus(DataframeSource(cor_data1))
corpus<-tm_map(corpus,removePunctuation)
corpus<-tm_map(corpus,removeNumbers)
corpus<-tm_map(corpus,removeWords,stopwords("english"))
corpus<-tm_map(corpus,removeWords,c("phirjumla","kno","dec","hhmmm","a","aur","all","and","also","bahutkrantikari","babaji","ayega"))
corpus<-tm_map(corpus,stripWhitespace)
corpus<-tm_map(corpus,stemDocument)
corpus_df <-as.data.frame(corpus)
head(corpus_df)
dtm <-DocumentTermMatrix(corpus)
dtm$content
names(dtm)
dtm
x<-as.data.frame(as.matrix(dtm))
write.csv(x, "docu_term.csv")
setwd("C:/Users/prabanch/Desktop/PGBA/R Programming")
write.csv(x, "docu_term.csv")
require(twitteR)
require(ROAuth)
#The original example used the twitteR library to pull in a user stream
#Instead, I'm going to pull in a search around a hashtag.
options(httr_oauth_cache=T)
api_key <- "y9rsFAuHjptL1WRHgvKdnIehN"
api_secret <- "184vfE03L7R5q6TyIgP7leQFRURbyogyMNAsWXAbMfyY0ubeCE"
access_token <- "105202631-2Y1NDPiOWySghC3mB9Pp3xNVV4zKNxDDyLZPRLOk"
access_token_secret <- "4rlCQ6GPaoUQhSeFSDkhosZ1kRUnbcDIbjC7VWQJTeIda"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
rdmTweets2 <- searchTwitter("#OPannerselvam", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1
while ( i <= nrow(df))
{
cor1 = paste(df[i,]$text, "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
i
while ( i <= nrow(df))
{
cor1 <- substr(cor1, start=1, stop=100)
cor1 = paste(df[i,]$text, "#OPannerselvam", "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
cor1
cor1 <- substr(cor1, start=1, stop=100)
cor1
cor1 = paste(df[i,]$text, "#OPannerselvam", "#opsGethu")
cor1
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
i
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
Sys.sleep(30)
i = i+ 1
}
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
i = 1 +1
i
i = 20
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
i
i
i <= nrow(df)
rdmTweets2 <- searchTwitter("#OPannerselvam", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
require(twitteR)
require(ROAuth)
#The original example used the twitteR library to pull in a user stream
#Instead, I'm going to pull in a search around a hashtag.
options(httr_oauth_cache=T)
api_key <- "y9rsFAuHjptL1WRHgvKdnIehN"
api_secret <- "184vfE03L7R5q6TyIgP7leQFRURbyogyMNAsWXAbMfyY0ubeCE"
access_token <- "105202631-2Y1NDPiOWySghC3mB9Pp3xNVV4zKNxDDyLZPRLOk"
access_token_secret <- "4rlCQ6GPaoUQhSeFSDkhosZ1kRUnbcDIbjC7VWQJTeIda"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
rdmTweets2 <- searchTwitter("#WeWantOPSBackasCM", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
rdmTweets2 <- searchTwitter("#WeWantOPSBackasCM", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
rdmTweets2 <- searchTwitter("#WeWantOPSBackasCM", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
rdmTweets2 <- searchTwitter("#TNSaysNo2Sasi", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#opsGethu", "#TNSaysNo2Sasi")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
status
Sys.sleep(30)
i = i+ 1
}
})
tryCatch({
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
})
rdmTweets2 <- searchTwitter("#OPSVsSasikala", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPannerselvam", "#TNSaysNo2Sasi", "#OPSVsSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
tryCatch({
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
})
Sys.sleep(10)
i = i+ 1
}
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#TNSaysNo2Sasi", "#OPSVsSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
tryCatch({
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
})
Sys.sleep(10)
i = i+ 1
}
tryCatch
(
{
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
},
error =
paste("error")
)
tryCatch
(
{
status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE)
},
error = function() print("vari")
)
try( status = updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
try( updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#TNSaysNo2Sasi", "#OPSVsSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
try( updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
Sys.sleep(10)
i = i+ 1
}
rdmTweets2 <- searchTwitter("#OPSVsSasikala", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=100)
cor1 = paste(cor1,  "#OPSVsSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
try( updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
Sys.sleep(10)
i = i+ 1
}
rdmTweets2 <- searchTwitter("#OPSVsSasikala", n=500)
df <- do.call("rbind", lapply(rdmTweets2, as.data.frame))
i = 1 +1
while ( i <= nrow(df))
{
cor1 <- substr(df[i,]$text, start=1, stop=110)
cor1 = paste(cor1,  "#SaveTNFROMSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
try( updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
i = i+ 1
}
while ( i <= nrow(df))
{
cor1 = paste("#SaveTNFROMSasikala")
cor1
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
try( updateStatus(cor1, lat=NULL, long=NULL, placeID=NULL,
displayCoords=NULL, inReplyTo=NULL, mediaPath=NULL,
bypassCharLimit=FALSE),
silent = TRUE
)
i = i+ 1
}
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
api_key <- "y9rsFAuHjptL1WRHgvKdnIehN"
api_secret <- "184vfE03L7R5q6TyIgP7leQFRURbyogyMNAsWXAbMfyY0ubeCE"
access_token <- "105202631-2Y1NDPiOWySghC3mB9Pp3xNVV4zKNxDDyLZPRLOk"
access_token_secret <- "4rlCQ6GPaoUQhSeFSDkhosZ1kRUnbcDIbjC7VWQJTeIda"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
y <- "y9rsFAuHjptL1WRHgvKdnIehN"
api_secret <- "184vfE03L7R5q6TyIgP7leQFRURbyogyMNAsWXAbMfyY0ubeCE"
access_token <- "105202631-2Y1NDPiOWySghC3mB9Pp3xNVV4zKNxDDyLZPRLOk"
access_token_secret <- "4rlCQ6GPaoUQhSeFSDkhosZ1kRUnbcDIbjC7VWQJTeIda"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
api_key <- "y9rsFAuHjptL1WRHgvKdnIehN"
api_secret <- "184vfE03L7R5q6TyIgP7leQFRURbyogyMNAsWXAbMfyY0ubeCE"
access_token <- "105202631-2Y1NDPiOWySghC3mB9Pp3xNVV4zKNxDDyLZPRLOk"
access_token_secret <- "4rlCQ6GPaoUQhSeFSDkhosZ1kRUnbcDIbjC7VWQJTeIda"
setup_twitter_oauth(api_key,api_secret,access_token,access_token_secret)
